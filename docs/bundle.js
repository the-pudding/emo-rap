!function(t){var e={};function a(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e,a){"use strict";var n=s(a(1)),r=s(a(3)),i=s(a(4));function s(t){return t&&t.__esModule?t:{default:t}}var o=d3.select("body"),l=0;o.classed("is-mobile",r.default.any()),window.addEventListener("resize",(0,n.default)(function(){var t=o.node().offsetWidth;l!==t&&(l=t,i.default.resize())},150)),function(){if(o.select("header").classed("is-sticky")){var t=o.select(".header__menu"),e=o.select(".header__toggle");e.on("click",function(){var a=t.classed("is-visible");t.classed("is-visible",!a),e.classed("is-visible",!a)})}}(),i.default.init()},function(t,e,a){(function(e){var a=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt,c="object"==typeof e&&e&&e.Object===Object&&e,d="object"==typeof self&&self&&self.Object===Object&&self,u=c||d||Function("return this")(),p=Object.prototype.toString,f=Math.max,h=Math.min,y=function(){return u.Date.now()};function m(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function x(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&p.call(t)==n}(t))return a;if(m(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=m(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var c=s.test(t);return c||o.test(t)?l(t.slice(2),c?2:8):i.test(t)?a:+t}t.exports=function(t,e,a){var n,r,i,s,o,l,c=0,d=!1,u=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var a=n,i=r;return n=r=void 0,c=e,s=t.apply(i,a)}function b(t){var a=t-l;return void 0===l||a>=e||a<0||u&&t-c>=i}function v(){var t=y();if(b(t))return k(t);o=setTimeout(v,function(t){var a=e-(t-l);return u?h(a,i-(t-c)):a}(t))}function k(t){return o=void 0,p&&n?g(t):(n=r=void 0,s)}function w(){var t=y(),a=b(t);if(n=arguments,r=this,l=t,a){if(void 0===o)return function(t){return c=t,o=setTimeout(v,e),d?g(t):s}(l);if(u)return o=setTimeout(v,e),g(l)}return void 0===o&&(o=setTimeout(v,e)),s}return e=x(e)||0,m(a)&&(d=!!a.leading,i=(u="maxWait"in a)?f(x(a.maxWait)||0,e):i,p="trailing"in a?!!a.trailing:p),w.cancel=function(){void 0!==o&&clearTimeout(o),c=0,n=l=r=o=void 0},w.flush=function(){return void 0===o?s:k(y())},w}}).call(this,a(2))},function(t,e){var a;a=function(){return this}();try{a=a||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(a=window)}t.exports=a},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return n.android()||n.blackberry()||n.ios()||n.opera()||n.windows()}};e.default=n},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={init:function(){var t,e=document.getElementById("lucid-dreams"),a=d3.select(".audio-controls"),n=d3.scaleThreshold().domain([0,3,5.8,8.45,12.34,15,18,20.6,100]).range([0,1,2,3,4,5,6,7,8,9]),r=d3.select(".verses").selectAll("p");a.on("click",function(i){e.paused?(e.play(),a.select(".volume-on").style("display","none"),a.select(".volume-off").style("display","block"),a.select(".play-text").text("Pause"),d3.select(".verses").classed("playing",!0),t=d3.timer(function(i){var s=n(e.currentTime)-1;r.style("color",function(t,e){var a=e;return-1==s?null:(s==a?(d3.select(this).classed("show-face",!0),7==s?d3.select(this).select(".verse-face").style("background-position-x","-243px"):d3.select(this).select(".verse-face").style("background-position-x",30.375*(8-s)-243+"px")):d3.select(this).classed("show-face",!1),s>=a?null:"#dfdfdf")}),e.currentTime>22.8&&(t.stop(),d3.select(".verses").classed("playing",!1),a.select(".volume-on").style("display","block"),a.select(".volume-off").style("display","none"),a.select(".play-text").text("Play"),r.style("color",null))},150)):(e.pause(),a.select(".volume-on").style("display","block"),a.select(".volume-off").style("display","none"),a.select(".play-text").text("Play"),t.stop(),d3.select(".verses").classed("playing",!1),r.style("color",null))});var i=d3.select(".right-col");i.append("p").attr("class","track-name").append("span").text("Lil Uzi Vert - XO Tour Llif3");var s=["care","cry","real","lied","looked","eyes","baby","afraid","die","Push","edge","friends","dead"],o=["cry","die","afraid","die","dead"];i.append("div").attr("class","track-content").selectAll("p").data(["I don&rsquo;t really care if you cry","On the real, you shoulda never lied","Shoulda saw the way she looked me in my eyes","She said, Baby, I am not afraid to die","Push me to the edge","All my friends are dead"]).enter().append("p").attr("class","track-line").selectAll("span").data(function(t){return t.split(" ")}).enter().append("span").attr("class","track-word").classed("big-word",function(t){return s.indexOf(t)>-1}).classed("sad-word",function(t){return o.indexOf(t)>-1}).html(function(t){return t});var l=i.append("div").attr("class","results");l.append("p").attr("class","percent").html(function(){return"<span>38%</span> sad"}),l.append("p").attr("class","break-down").html(function(){return"<span>5 sad words</span> of <b>13</b> total words"});var c=new ScrollMagic.Controller;d3.csv("assets/data/df.csv",function(t){d3.csv("assets/data/tracks.csv",function(e){var a=["nothing_ruiner","deathgrips"],n=e.sort(function(t,e){return+e.pct_sad-+t.pct_sad}).filter(function(t){return-1==a.indexOf(t.artist)}),r=d3.map(d3.nest().key(function(t){return t.artist}).entries(n),function(t){return t.key});console.log(n);var i=["black_parade","dashboard","radiohead","takingback","chemicalromance","fall out boy","jimmyeatworld","paramore","brandnew"],s={dashboard:{artist:"Dashboard Confessional",album:"TPYHCtFtM"},radiohead:{artist:"Radiohead",album:"High and Dry"},takingback:{artist:"Taking Back Sunday",album:"Tell All Your Friends"},chemicalromance:{artist:"My Chemical Romance",album:"Three Cheers..."},black_parade:{artist:"My Chemical Romance",album:"The Black Parade"},"fall out boy":{artist:"Fall Out Boy",album:"From Under the Cork Tree"},jimmyeatworld:{artist:"Jimmy Eat World",album:"Bleed American"},brandnew:{artist:"Brand New",album:"Deja Entendu"},where_you:{artist:"Taking Back Sunday",album:"Where You Want To Be"},paramore:{artist:"Paramore",album:"Riot"},xxxtentacion:{artist:"XXXTentacion",album:"?"},liluzivert:{artist:"Lil Uzi Vert",album:"Luv is Rage 2"},juicewrld:{artist:"Juice Wrld",album:"Goodbye & Good Riddance"},lilpeep:{artist:"Lil Peep",album:"Come Over When You're Sober"},postmalone:{artist:"Post Malone",album:"Beerbongs & Bentleys"},drake:{artist:"Drake",album:"Scorpion"},"kanye college_dropout":{artist:"Kanye",album:"College Dropout"},"kanye ye":{artist:"Kanye",album:"Ye"},migos:{artist:"Migos",album:"Culture"},lilpump:{artist:"Lil Pump",album:"Lil Pump"},"kanye heartbreak":{artist:"Kanye",album:"808s"},tyler:{artist:"Tyler the Creator",album:"Flower Boy"},kidcudi:{artist:"Kid Cudi",album:"Man on the Moon"},deathgrips:{artist:"Death Grips",album:"The Money Store"},princess_red:{artist:"Princess Nokia",album:"A Girl Cried Red"},tripple_trip:{artist:"Trippie Redd",album:"Life's a Trip"},yung_lean:{artist:"Yung Lean",album:"Stranger"},nothing_reaper:{artist:"nothing,nowhere",album:"Reaper"},nothing_ruiner:{artist:"nothing,nowhere",album:"Ruiner"},lilxan:{artist:"Lil Xan",album:"Reaper"},"rico nasty":{artist:"Rico Nasty",album:"Nasty"},"young thug":{artist:"Young Thug",album:"Beautiful Thugger Girls"}},o=650,l=d3.select(".emo-index"),d=l.append("svg").attr("width",910).attr("height",700).style("width","910px").style("height","700px"),u=150,p=d3.scaleLinear().domain([.01,.22]).range([o,0]),f=l.append("div").attr("class","face-div").style("width","910px").style("height","700px").style("margin-top","50px"),h=f.append("div").attr("class","tool-tip"),y=f.append("div").attr("class","face-container").append("div").attr("class","face-img").attr("id","trigger").style("width",function(t){return"30px"}).style("height","30px").style("background-position-x","-243px").style("top",function(e){return p(Math.round(d3.max(t,function(t){return+t.percents})*u)/u)+"px"}).style("transform","translate(0,calc(-50% - 4px))"),m=t.filter(function(t){return-1==a.indexOf(t.artist)}),x=d3.nest().key(function(t){return-1==i.indexOf(t.artist)?"hiphop":"emo"}).key(function(t){return Math.round(+t.percents*u)/u}).entries(m),g=d.append("g").attr("transform","translate(0,50)").append("g").attr("transform","translate(442.5,0)");g.append("rect").attr("width",25).attr("height",o).attr("class","emo-index-axis").attr("x",0).attr("y",0);var b=g.append("g"),v=g.append("g").selectAll("g").data(x).enter().append("g").selectAll("g").data(function(t){return t.values}).enter().append("g"),k=(v.append("g").attr("class","rect-g"),v.selectAll("text").data(function(t){return t.values}).enter().append("text").attr("class",function(t){return-1==i.indexOf(t.artist)?"hip-hop-artist emo-index-band":"emo-artist emo-index-band"}).attr("y",function(t,e){return p(Math.round(+t.percents*u)/u)}).style("text-anchor",function(t){return-1==i.indexOf(t.artist)?"end":"start"}));k.append("tspan").attr("class",function(t){return t.artist,-1==i.indexOf(t.artist)?"album-index":"artist-index"}).text(function(t,e){var a=s[t.artist];return-1==i.indexOf(t.artist)?a.album:a.artist}),k.append("tspan").attr("class",function(t){return t.artist,-1==i.indexOf(t.artist)?"artist-index":"album-index"}).attr("dx",function(t){return"3"}).text(function(t,e){var a=s[t.artist];return-1==i.indexOf(t.artist)?a.artist:a.album}),v.append("g").append("text").attr("class","emo-band-hover-percent").attr("x",12.5).attr("y",function(t,e){return p(Math.round(+t.key*u)/u)}).text(function(t){return Math.round(100*t.key)+"%"}),v.each(function(t){var e=[],a=[];d3.select(this).selectAll(".emo-index-band").each(function(t){e.push(d3.select(this).node().getBBox().width),a.push(d3.select(this).node().getBBox().height)}),t.offsetAmount=e,d3.select(this).selectAll(".emo-index-band").each(function(t,n){var o=n,l=1,c=39,d=t.percents,f=t.artist;-1==i.indexOf(t.artist)&&(l=-1,c=-14),1==n?(d3.select(this.parentNode).select(".rect-g").append("rect").attr("width",e[o]+8).attr("height",a[0]+4).attr("class",function(t){return-1==i.indexOf(f)?"rap-rect":"emo-rect"}).attr("x",function(t){return-1==i.indexOf(f)?c+l*e[o-1]+12*l-(e[o]+4):c+l*e[o-1]+12*l-4}).attr("y",function(t,e){return p(Math.round(+d*u)/u)-(a[o]/2+7)}),d3.select(this).attr("x",c+l*e[o-1]+12*l)):2==n?(d3.select(this.parentNode).select(".rect-g").append("rect").attr("width",e[o]+8).attr("height",a[0]+4).attr("class",function(t){return-1==i.indexOf(f)?"rap-rect":"emo-rect"}).attr("x",function(t){return-1==i.indexOf(f)?c+l*(e[o-1]+e[o-2])+12*l*2-(e[o]+4):c+l*(e[o-1]+e[o-2])+12*l*2}).attr("y",function(t,e){return p(Math.round(+d*u)/u)-(a[o]/2+7)}),d3.select(this).attr("x",c+l*(e[o-1]+e[o-2])+12*l*2)):(d3.select(this.parentNode).select(".rect-g").append("rect").attr("width",e[o]+8).attr("height",a[0]+4).attr("class",function(t){return-1==i.indexOf(f)?"rap-rect":"emo-rect"}).attr("x",function(t){return-1==i.indexOf(f)?c-(e[o]+4):c-4}).attr("y",function(t,e){return p(Math.round(+d*u)/u)-(a[o]/2+7)}),d3.select(this).attr("x",c)),d3.select(this.parentNode).select(".rect-g").selectAll("rect").filter(function(t,e){return e==o}).on("mouseover",function(t){!function(t,e,a){h.style("display","block").selectAll("div").remove(),h.append("div").attr("class","tool-tip-head").html(function(t){return"<span>Track Sadness of</span> "+s[e].album});var n=h.selectAll(".tool-tip-track").data(r.get(e).values).enter().append("div").attr("class","tool-tip-track");n.selectAll("div").data(function(t){return[t.track_title,Math.round(100*t.pct_sad)+"%"]}).enter().append("div").attr("class",function(t,e){return 0==e?"tool-tip-track-track":"tool-tip-track-percent"}).html(function(t,e){return t.length>30?t.slice(0,27)+"...":t}).style("color",function(t,a){if(1==a)return-1==i.indexOf(e)?"#18604F":"#28115A"}),n.filter(function(t,e){return 0==e}).selectAll("div").each(function(t,e){if(1==e){var a=d3.select(this).text();d3.select(this).html(a+" <span>sad words</span>")}}),t.select(".emo-band-hover-percent").style("display","block"),Math.round(O(_)*u)/u==Math.round(t.datum().key*u)/u&&y.style("visibility","hidden")}(d3.select(this.parentNode.parentNode),f)}).on("mouseout",function(t){!function(t,e,a){t.select(".emo-band-hover-percent").style("display",null),y.style("visibility",null),h.style("display","none")}(d3.select(this.parentNode.parentNode))}).on("mousemove",function(t){var e=1;-1==i.indexOf(f)&&(e=-1);var a=[25,25],n=d3.mouse(this);h.style("left",function(){return e*a[0]+442.5+n[0]+"px"}),h.style("top",a[1]+n[1]+"px")})})}),b.append("text").attr("x",0).attr("y",-20).attr("class","axis-text").selectAll("tspan").data(["Most Sad","Lyrics"]).enter().append("tspan").attr("dy",function(t,e){return 1==e?12:0}).attr("x",12.5).attr("text-anchor","middle").text(function(t){return t}),b.append("text").attr("x",0).attr("y",665).attr("class","axis-text").selectAll("tspan").data(["Least Sad","Lyrics"]).enter().append("tspan").attr("dy",function(t,e){return 1==e?12:0}).attr("x",12.5).attr("text-anchor","middle").text(function(t){return t}),b.append("text").attr("x",0).attr("y",4).attr("class","axis-percent").selectAll("tspan").data([Math.round(22)+"%","Sad"]).enter().append("tspan").attr("dy",function(t,e){return 1==e?17:0}).attr("x",12.5).attr("text-anchor","middle").text(function(t){return t}),b.append("text").attr("x",0).attr("y",633).attr("class","axis-percent").style("alignment-baseline","text-after-edge").style("dominant-baseline","text-after-edge").selectAll("tspan").data([Math.round(1)+"%","Sad"]).enter().append("tspan").attr("dy",function(t,e){return 1==e?15:0}).attr("x",12.5).attr("text-anchor","middle").text(function(t){return t});var w=b.append("text").attr("x",39).attr("y",0).attr("class","axis-head emo-head").text("Emo Bands (third wave, ‘00s - ‘10s)"),M=b.append("text").attr("x",-14).attr("y",0).attr("class","axis-head hip-hop-head").text("Emo-rap / Hip Hop").attr("text-anchor","end");b.append("line").attr("x1",39).attr("x2",w.node().getBBox().width+14+25+14).attr("y1",5).attr("y2",5).attr("class","axis-head-line"),b.append("line").attr("x1",-14).attr("x2",-M.node().getBBox().width-14-14).attr("y1",5).attr("y2",5).attr("class","axis-head-line");var O=d3.scaleLinear().domain([0,1]).range([d3.max(t,function(t){return+t.percents}),.04815714285714286]),_=0,A=d3.scaleQuantize().domain([0,1]).range(d3.range(9)),T=y.append("p").attr("class","face-img-percent").style("width",function(t){return"30px"}).style("margin-top","30px").text(function(){return Math.round(100*O(_))+"%"});d3.select(".saddest-songs").selectAll("p").data(n.slice(0,50)).enter().append("p").attr("class",function(t){return-1==i.indexOf(t.artist)?"saddest-song-track rap-top-song":"saddest-song-track emo-top-song"}).html(function(t,e){var a=s[t.artist],n=t.track_title;return n.length>25&&(n=n.slice(0,22)+"..."),"<span class='saddest-song-track-count'>"+(e+1)+".</span>"+a.artist+" - <span class='saddest-song-track-title'>"+n+"</span><span class='saddest-song-track-percent'>"+Math.round(100*t.pct_sad)+"%</span>"}),new ScrollMagic.Scene({triggerElement:"#trigger",duration:p(Math.round(7.223571428571429)/u)-p(Math.round(d3.max(t,function(t){return+t.percents})*u)/u),triggerHook:.5}).setPin("#trigger",{pushFollowers:!1}).addTo(c).on("progress",function(t){var e=Math.round(100*t.progress)/100;e!=_&&(_=e,y.style("background-position-x",30.375*A(_)-243+"px"),T.text(function(){return 5==Math.round(100*O(_))?"":Math.round(100*O(_))+"%"}))})})})},resize:function(){}}}]);
!function(t){var e={};function a(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e,a){"use strict";var n=i(a(1)),r=i(a(3)),s=i(a(4));function i(t){return t&&t.__esModule?t:{default:t}}var o=d3.select("body"),l=0;o.classed("is-mobile",r.default.any()),window.addEventListener("resize",(0,n.default)(function(){var t=o.node().offsetWidth;l!==t&&(l=t,s.default.resize())},150)),function(){if(o.select("header").classed("is-sticky")){var t=o.select(".header__menu"),e=o.select(".header__toggle");e.on("click",function(){var a=t.classed("is-visible");t.classed("is-visible",!a),e.classed("is-visible",!a)})}}(),s.default.init()},function(t,e,a){(function(e){var a=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt,d="object"==typeof e&&e&&e.Object===Object&&e,c="object"==typeof self&&self&&self.Object===Object&&self,u=d||c||Function("return this")(),p=Object.prototype.toString,h=Math.max,f=Math.min,y=function(){return u.Date.now()};function m(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&p.call(t)==n}(t))return a;if(m(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=m(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var d=i.test(t);return d||o.test(t)?l(t.slice(2),d?2:8):s.test(t)?a:+t}t.exports=function(t,e,a){var n,r,s,i,o,l,d=0,c=!1,u=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function x(e){var a=n,s=r;return n=r=void 0,d=e,i=t.apply(s,a)}function v(t){var a=t-l;return void 0===l||a>=e||a<0||u&&t-d>=s}function b(){var t=y();if(v(t))return w(t);o=setTimeout(b,function(t){var a=e-(t-l);return u?f(a,s-(t-d)):a}(t))}function w(t){return o=void 0,p&&n?x(t):(n=r=void 0,i)}function k(){var t=y(),a=v(t);if(n=arguments,r=this,l=t,a){if(void 0===o)return function(t){return d=t,o=setTimeout(b,e),c?x(t):i}(l);if(u)return o=setTimeout(b,e),x(l)}return void 0===o&&(o=setTimeout(b,e)),i}return e=g(e)||0,m(a)&&(c=!!a.leading,s=(u="maxWait"in a)?h(g(a.maxWait)||0,e):s,p="trailing"in a?!!a.trailing:p),k.cancel=function(){void 0!==o&&clearTimeout(o),d=0,n=l=r=o=void 0},k.flush=function(){return void 0===o?i:w(y())},k}}).call(this,a(2))},function(t,e){var a;a=function(){return this}();try{a=a||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(a=window)}t.exports=a},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return n.android()||n.blackberry()||n.ios()||n.opera()||n.windows()}};e.default=n},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={init:function(){var t,e=document.getElementById("lucid-dreams"),a=d3.select(".audio-controls"),n=d3.scaleThreshold().domain([0,3,5.8,8.45,12.34,15,18,20.6,100]).range([0,1,2,3,4,5,6,7,8,9]),r=d3.select(".verses").selectAll("p");a.on("click",function(s){e.paused?(e.play(),a.select(".volume-on").style("display","none"),a.select(".volume-off").style("display","block"),a.select(".play-text").text("Pause"),d3.select(".verses").classed("playing",!0),t=d3.timer(function(s){var i=n(e.currentTime)-1;r.style("color",function(t,e){var a=e;return-1==i?null:(i==a?(d3.select(this).classed("show-face",!0),7==i?d3.select(this).select(".verse-face").style("background-position-x","-243px"):d3.select(this).select(".verse-face").style("background-position-x",30.375*(8-i)-243+"px")):d3.select(this).classed("show-face",!1),i>=a?null:"#dfdfdf")}),e.currentTime>22.8&&(t.stop(),d3.select(".verses").classed("playing",!1),a.select(".volume-on").style("display","block"),a.select(".volume-off").style("display","none"),a.select(".play-text").text("Play"),r.style("color",null))},150)):(e.pause(),a.select(".volume-on").style("display","block"),a.select(".volume-off").style("display","none"),a.select(".play-text").text("Play"),t.stop(),d3.select(".verses").classed("playing",!1),r.style("color",null))});var s=d3.select(".right-col"),i=["Are you alright?","I'm alright, I'm quite alright","And my money's right","8… (yeah)","Countin' them bands","All way to the top 'til they be fallin' over","(Yeah, yeah, yeah)","Countin' them bands","On my way to the top 'til we fallin' over","","I don't really care if you cry","On the real, you shoulda never lied","Shoulda saw the way she looked me in my eyes","She said, 'Baby, I am not afraid to die'","Push me to the edge","All my friends are dead","Push me to the edge","All my friends are dead","Push me to the edge","All my friends are dead","Push me to the edge","","Phantom that's all red, inside all white","Like somethin' you ride a sled down, I just want that head","My Brittany got mad, I'm barely her man now","Everybody got the same swag now","Watch the way that I tear it down","Stackin' my bands all the way to the top","All the way 'til my bands fallin' over","Every time that you leave your spot","Your girlfriend call me like, 'Come on over!'","I like the way that she treat me","Gon' leave you, won't leave me, I call it that Casanova","She say I'm insane, yeah","I might blow my brain out (hey)","Xanny, help the pain, yeah","Please, Xanny, make it go away","I'm committed, not addicted, but it keep control of me","All the pain, now I can't feel it","I swear that it's slowin' me, yeah","","I don't really care if you cry","On the real, you shoulda never lied","Saw the way she looked me in my eyes","She said: 'I am not afraid to die.'","All my friends are dead","Push me to the edge (yeah)","All my friends are dead, yeah, ooh","Push me to the edge","All my friends are dead, yeah","All my friends are dead, yeah","","That is not your swag, I swear you fake hard","Now these niggas wanna take my cadence","Rain on 'em, thunderstorm, rain on 'em (ooh, yeah)","Medicine, lil' nigga, take some (yeh, yeh)","Fast car, NASCAR, race on 'em","In the club, ain't got no ones, then we would beg them","Clothes from overseas, got the racks and they all C-Notes","You is not a G though","Lookin' at you stackin' all your money, it all green though","I was countin' that and these all twenties, that's a G-roll","","She say: 'You're the worst, you're the worst.'","I cannot die because this my universe","","I don't really care if you cry","On the real, you shoulda never lied","Shoulda saw the way she looked me in my eyes","She said: 'Baby, I am not afraid to die.'","Push me to the edge","All my friends are dead","Push me to the edge","All my friends are dead","Push me to the edge","All my friends are dead","Push me to the edge"];s.append("p").attr("class","track-name").append("span").text("Lil Uzi Vert - XO Tour Llif3");var o=["Baby,","care","cry","real","lied","looked","eyes","baby","afraid","die","Push","edge","friends","dead"],l=["cry","die","afraid","die","dead"];s.append("div").attr("class","track-content").selectAll("p").data(["I don&rsquo;t really care if you cry","On the real, you shoulda never lied","Shoulda saw the way she looked me in my eyes","She said, Baby, I am not afraid to die","Push me to the edge","All my friends are dead"]).enter().append("p").attr("class","track-line").selectAll("span").data(function(t){return t.split(" ")}).enter().append("span").attr("class","track-word").classed("big-word",function(t){return o.indexOf(t)>-1}).classed("sad-word",function(t){return l.indexOf(t)>-1}).html(function(t){return t});var d=s.append("div").attr("class","results");d.append("p").attr("class","percent").html(function(){return"<span>38%</span> sad"}),d.append("p").attr("class","break-down").html(function(){return"<span>4 sad words</span> of <b>11</b> total words"});var c=!0,u=s.append("div").attr("class","see-more").on("click",function(t){c?(c=!1,d3.select(".full-song").style("display","block"),p.text("Hide Song")):(d3.select(".full-song").style("display",null),p.text("Full Song"),c=!0)});u.append("div").html('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>');var p=u.append("p").text("Full Song"),h=new ScrollMagic.Controller;d3.csv("assets/data/df.csv",function(t){d3.csv("assets/data/tracks.csv",function(e){d3.csv("assets/data/unique.csv",function(a){var n=["nothing_ruiner","deathgrips"],r=d3.map(a,function(t){return t.word}),s=0,o=0,l=d3.select(".full-song");l.selectAll("p").data(i).enter().append("p").attr("class","track-line").selectAll("span").data(function(t){return t.split(/[ -]+/).map(function(t){var e=t.toLowerCase().replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,"").replace(/\s{2,}/g," ").replace(/'/g,"").replace("?",""),a=0;return r.has(e)&&(a=1,s+=1,"TRUE"==r.get(e).sad_fear&&(o+=1,a=2)),[e,t,a]})}).enter().append("span").attr("class","track-word").classed("big-word",function(t){if(t[2]>0)return!0}).classed("sad-word",function(t){if(2==t[2])return!0}).text(function(t){return t[1]});var d=l.append("div").attr("class","results");d.append("p").attr("class","percent").html("<span>"+Math.round(o/s*100)+"%</span> sad"),d.append("p").attr("class","break-down").html("<span>"+o+" sad words</span> of <b>"+s+"</b> total words");var c=e.sort(function(t,e){return+e.pct_sad-+t.pct_sad}).filter(function(t){return-1==n.indexOf(t.artist)}),u=d3.map(d3.nest().key(function(t){return t.artist}).entries(c),function(t){return t.key});console.log(c);var p=["black_parade","dashboard","radiohead","takingback","chemicalromance","fall out boy","jimmyeatworld","paramore","brandnew"],f={dashboard:{artist:"Dashboard Confessional",album:"TPYHCtFtM"},radiohead:{artist:"Radiohead",album:"High and Dry"},takingback:{artist:"Taking Back Sunday",album:"Tell All Your Friends"},chemicalromance:{artist:"My Chemical Romance",album:"Three Cheers..."},black_parade:{artist:"My Chemical Romance",album:"The Black Parade"},"fall out boy":{artist:"Fall Out Boy",album:"From Under the Cork Tree"},jimmyeatworld:{artist:"Jimmy Eat World",album:"Bleed American"},brandnew:{artist:"Brand New",album:"Deja Entendu"},where_you:{artist:"Taking Back Sunday",album:"Where You Want To Be"},paramore:{artist:"Paramore",album:"Riot"},xxxtentacion:{artist:"XXXTentacion",album:"?"},liluzivert:{artist:"Lil Uzi Vert",album:"Luv is Rage 2"},juicewrld:{artist:"Juice Wrld",album:"Goodbye & Good Riddance"},lilpeep:{artist:"Lil Peep",album:"Come Over When You're Sober"},postmalone:{artist:"Post Malone",album:"Beerbongs & Bentleys"},drake:{artist:"Drake",album:"Scorpion"},"kanye college_dropout":{artist:"Kanye",album:"College Dropout"},"kanye ye":{artist:"Kanye",album:"Ye"},migos:{artist:"Migos",album:"Culture"},lilpump:{artist:"Lil Pump",album:"Lil Pump"},"kanye heartbreak":{artist:"Kanye",album:"808s"},tyler:{artist:"Tyler the Creator",album:"Flower Boy"},kidcudi:{artist:"Kid Cudi",album:"Man on the Moon"},deathgrips:{artist:"Death Grips",album:"The Money Store"},princess_red:{artist:"Princess Nokia",album:"A Girl Cried Red"},tripple_trip:{artist:"Trippie Redd",album:"Life's a Trip"},yung_lean:{artist:"Yung Lean",album:"Stranger"},nothing_reaper:{artist:"nothing,nowhere",album:"Reaper"},nothing_ruiner:{artist:"nothing,nowhere",album:"Ruiner"},lilxan:{artist:"Lil Xan",album:"Reaper"},"rico nasty":{artist:"Rico Nasty",album:"Nasty"},"young thug":{artist:"Young Thug",album:"Beautiful Thugger Girls"}},y=650,m=d3.select(".emo-index"),g=m.append("svg").attr("width",910).attr("height",700).style("width","910px").style("height","700px"),x=150,v=d3.scaleLinear().domain([.01,.22]).range([y,0]),b=m.append("div").attr("class","face-div").style("width","910px").style("height","700px").style("margin-top","50px"),w=b.append("div").attr("class","tool-tip"),k=b.append("div").attr("class","face-container").append("div").attr("class","face-img").attr("id","trigger").style("width",function(t){return"30px"}).style("height","30px").style("background-position-x","-243px").style("top",function(e){return v(Math.round(d3.max(t,function(t){return+t.percents})*x)/x)+"px"}).style("transform","translate(0,calc(-50% - 4px))"),A=t.filter(function(t){return-1==n.indexOf(t.artist)}),O=d3.nest().key(function(t){return-1==p.indexOf(t.artist)?"hiphop":"emo"}).key(function(t){return Math.round(+t.percents*x)/x}).entries(A),M=g.append("g").attr("transform","translate(0,50)").append("g").attr("transform","translate(442.5,0)");M.append("rect").attr("width",25).attr("height",y).attr("class","emo-index-axis").attr("x",0).attr("y",0);var P=M.append("g"),S=M.append("g").selectAll("g").data(O).enter().append("g").selectAll("g").data(function(t){return t.values}).enter().append("g"),_=(S.append("g").attr("class","rect-g"),S.selectAll("text").data(function(t){return t.values}).enter().append("text").attr("class",function(t){return-1==p.indexOf(t.artist)?"hip-hop-artist emo-index-band":"emo-artist emo-index-band"}).attr("y",function(t,e){return v(Math.round(+t.percents*x)/x)}).style("text-anchor",function(t){return-1==p.indexOf(t.artist)?"end":"start"}));_.append("tspan").attr("class",function(t){return t.artist,-1==p.indexOf(t.artist)?"album-index":"artist-index"}).text(function(t,e){var a=f[t.artist];return-1==p.indexOf(t.artist)?a.album:a.artist}),_.append("tspan").attr("class",function(t){return t.artist,-1==p.indexOf(t.artist)?"artist-index":"album-index"}).attr("dx",function(t){return"3"}).text(function(t,e){var a=f[t.artist];return-1==p.indexOf(t.artist)?a.artist:a.album}),S.append("g").append("text").attr("class","emo-band-hover-percent").attr("x",12.5).attr("y",function(t,e){return v(Math.round(+t.key*x)/x)}).text(function(t){return Math.round(100*t.key)+"%"}),S.each(function(t){var e=[],a=[];d3.select(this).selectAll(".emo-index-band").each(function(t){e.push(d3.select(this).node().getBBox().width),a.push(d3.select(this).node().getBBox().height)}),t.offsetAmount=e,d3.select(this).selectAll(".emo-index-band").each(function(t,n){var r=n,s=1,i=39,o=t.percents,l=t.artist;-1==p.indexOf(t.artist)&&(s=-1,i=-14),1==n?(d3.select(this.parentNode).select(".rect-g").append("rect").attr("width",e[r]+8).attr("height",a[0]+4).attr("class",function(t){return-1==p.indexOf(l)?"rap-rect":"emo-rect"}).attr("x",function(t){return-1==p.indexOf(l)?i+s*e[r-1]+12*s-(e[r]+4):i+s*e[r-1]+12*s-4}).attr("y",function(t,e){return v(Math.round(+o*x)/x)-(a[r]/2+7)}),d3.select(this).attr("x",i+s*e[r-1]+12*s)):2==n?(d3.select(this.parentNode).select(".rect-g").append("rect").attr("width",e[r]+8).attr("height",a[0]+4).attr("class",function(t){return-1==p.indexOf(l)?"rap-rect":"emo-rect"}).attr("x",function(t){return-1==p.indexOf(l)?i+s*(e[r-1]+e[r-2])+12*s*2-(e[r]+4):i+s*(e[r-1]+e[r-2])+12*s*2}).attr("y",function(t,e){return v(Math.round(+o*x)/x)-(a[r]/2+7)}),d3.select(this).attr("x",i+s*(e[r-1]+e[r-2])+12*s*2)):(d3.select(this.parentNode).select(".rect-g").append("rect").attr("width",e[r]+8).attr("height",a[0]+4).attr("class",function(t){return-1==p.indexOf(l)?"rap-rect":"emo-rect"}).attr("x",function(t){return-1==p.indexOf(l)?i-(e[r]+4):i-4}).attr("y",function(t,e){return v(Math.round(+o*x)/x)-(a[r]/2+7)}),d3.select(this).attr("x",i)),d3.select(this.parentNode).select(".rect-g").selectAll("rect").filter(function(t,e){return e==r}).on("mouseover",function(t){!function(t,e,a){w.style("display","block").selectAll("div").remove(),w.append("div").attr("class","tool-tip-head").html(function(t){return"<span>Track Sadness of</span> "+f[e].album});var n=w.selectAll(".tool-tip-track").data(u.get(e).values).enter().append("div").attr("class","tool-tip-track");n.selectAll("div").data(function(t){return[t.track_title,Math.round(100*t.pct_sad)+"%"]}).enter().append("div").attr("class",function(t,e){return 0==e?"tool-tip-track-track":"tool-tip-track-percent"}).html(function(t,e){return t.length>30?t.slice(0,27)+"...":t}).style("color",function(t,a){if(1==a)return-1==p.indexOf(e)?"#18604F":"#28115A"}),n.filter(function(t,e){return 0==e}).selectAll("div").each(function(t,e){if(1==e){var a=d3.select(this).text();d3.select(this).html(a+" <span>sad words</span>")}}),t.select(".emo-band-hover-percent").style("display","block"),Math.round(I(j)*x)/x==Math.round(t.datum().key*x)/x&&k.style("visibility","hidden")}(d3.select(this.parentNode.parentNode),l)}).on("mouseout",function(t){!function(t,e,a){t.select(".emo-band-hover-percent").style("display",null),k.style("visibility",null),w.style("display","none")}(d3.select(this.parentNode.parentNode))}).on("mousemove",function(t){var e=1;-1==p.indexOf(l)&&(e=-1);var a=[25,25],n=d3.mouse(this);w.style("left",function(){return e*a[0]+442.5+n[0]+"px"}),w.style("top",a[1]+n[1]+"px")})})}),P.append("text").attr("x",0).attr("y",-20).attr("class","axis-text").selectAll("tspan").data(["Most Sad","Lyrics"]).enter().append("tspan").attr("dy",function(t,e){return 1==e?12:0}).attr("x",12.5).attr("text-anchor","middle").text(function(t){return t}),P.append("text").attr("x",0).attr("y",665).attr("class","axis-text").selectAll("tspan").data(["Least Sad","Lyrics"]).enter().append("tspan").attr("dy",function(t,e){return 1==e?12:0}).attr("x",12.5).attr("text-anchor","middle").text(function(t){return t}),P.append("text").attr("x",0).attr("y",4).attr("class","axis-percent").selectAll("tspan").data([Math.round(22)+"%","Sad"]).enter().append("tspan").attr("dy",function(t,e){return 1==e?17:0}).attr("x",12.5).attr("text-anchor","middle").text(function(t){return t}),P.append("text").attr("x",0).attr("y",633).attr("class","axis-percent").style("alignment-baseline","text-after-edge").style("dominant-baseline","text-after-edge").selectAll("tspan").data([Math.round(1)+"%","Sad"]).enter().append("tspan").attr("dy",function(t,e){return 1==e?15:0}).attr("x",12.5).attr("text-anchor","middle").text(function(t){return t});var T=P.append("text").attr("x",39).attr("y",0).attr("class","axis-head emo-head").text("Emo Bands (third wave, ‘00s - ‘10s)"),B=P.append("text").attr("x",-14).attr("y",0).attr("class","axis-head hip-hop-head").text("Emo-rap / Hip Hop").attr("text-anchor","end");P.append("line").attr("x1",39).attr("x2",T.node().getBBox().width+14+25+14).attr("y1",5).attr("y2",5).attr("class","axis-head-line"),P.append("line").attr("x1",-14).attr("x2",-B.node().getBBox().width-14-14).attr("y1",5).attr("y2",5).attr("class","axis-head-line");var I=d3.scaleLinear().domain([0,1]).range([d3.max(t,function(t){return+t.percents}),.04815714285714286]),j=0,C=d3.scaleQuantize().domain([0,1]).range(d3.range(9)),L=k.append("p").attr("class","face-img-percent").style("width",function(t){return"30px"}).style("margin-top","30px").text(function(){return Math.round(100*I(j))+"%"});d3.select(".saddest-songs").selectAll("p").data(c.slice(0,50)).enter().append("p").attr("class",function(t){return-1==p.indexOf(t.artist)?"saddest-song-track rap-top-song":"saddest-song-track emo-top-song"}).html(function(t,e){var a=f[t.artist],n=t.track_title;return n.length>25&&(n=n.slice(0,22)+"..."),"<span class='saddest-song-track-count'>"+(e+1)+".</span>"+a.artist+" - <span class='saddest-song-track-title'>"+n+"</span><span class='saddest-song-track-percent'>"+Math.round(100*t.pct_sad)+"%</span>"}),new ScrollMagic.Scene({triggerElement:"#trigger",duration:v(Math.round(3.75)/x)-v(Math.round(d3.max(t,function(t){return+t.percents})*x)/x),triggerHook:.5}).setPin("#trigger",{pushFollowers:!1}).addTo(h).on("progress",function(t){var e=Math.round(100*t.progress)/100;e!=j&&(j=e,k.style("background-position-x",30.375*C(j)-243+"px"),L.text(function(){return 5==Math.round(100*I(j))?"":Math.round(100*I(j))+"%"}))})})})})},resize:function(){}}}]);